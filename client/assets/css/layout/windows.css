/* Window Layout Styles */

.window {
    position: absolute;
    top: var(--window-default-top, 100px);
    left: var(--window-default-left, 100px);
    width: var(--window-default-width, 640px);
    height: var(--window-default-height, 520px);
    backdrop-filter: var(--blur, blur(7px));
    z-index: var(--z-window-base, 1001);
    box-shadow: var(--shadow-soft, 0 0 7px -4px rgba(255, 255, 255, 0.5));
    border-radius: var(--micro-sm, 4px);
    box-sizing: border-box;
    transition: var(--transition-window, all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94));
    transform-origin: center;
}

.window.maximized {
    width: 100% !important;
    height: calc(100vh - 40px) !important;
    left: 0 !important;
    top: 0 !important;
    border-radius: 0;
}

.window.maximized .window-title-bar {
    border-radius: 0 !important;
}

/* Window Title Bar */
.window-title-bar {
    display: flex;
    align-items: center;
    padding: var(--micro-sm, 4px) var(--micro-xl, 8px);
    background: linear-gradient(65deg, rgba(0,0,0,0.8), rgba(0,0,0,0.6));
    border-bottom: var(--border, 1px solid rgba(20, 20, 20, 0.6));
    border-radius: var(--micro-sm, 4px) var(--micro-sm, 4px) 0 0;
    color: var(--text-primary, #f0f0f0);
    font-size: 0.875em;
    user-select: none;
    height: var(--window-titlebar-height, 32px);
    box-sizing: border-box;
}

/* Window Title */
.window-title {
    flex: 1;
    display: flex;
    align-items: center;
    text-shadow: var(--text-shadow, 1px 1px 2px rgba(20, 20, 20, 1));
    font-weight: 500;
    overflow: hidden;
}

.window-title img {
    width: var(--icon-size-window-title, 16px);
    height: var(--icon-size-window-title, 16px);
    margin-right: var(--micro-xl, 8px);
    vertical-align: middle;
    flex-shrink: 0;
}

.window-title-text {
    color: var(--text-primary, #f0f0f0);
    text-shadow: var(--text-shadow, 1px 1px 2px rgba(20, 20, 20, 1));
    font-size: 0.875rem;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Window Title Buttons */
.window-title-button {
    width: var(--window-button-size, 20px);
    height: var(--window-button-size, 20px);
    display: flex;
    margin-left: var(--micro-xs, 3px);
    justify-content: center;
    align-items: center;
    color: var(--text-primary, #f0f0f0);
    border: var(--button-border, 1px inset rgba(255, 255, 255, 0.35));
    border-radius: var(--micro-sm, 4px);
    background: var(--button-color, rgba(20, 20, 20, 0.5));
    transition: var(--transition, all 0.2s ease);
    cursor: pointer;
    flex-shrink: 0;
}

.window-title-button img {
    height: var(--icon-size-window-button, 12px);
    width: var(--icon-size-window-button, 12px);
    pointer-events: none;
    filter: brightness(1.2);
}

.window-title-button:hover {
    background: var(--hover-bg, rgba(255, 255, 255, 0.05));
    box-shadow: var(--shadow-soft, 0 0 7px -4px rgba(255, 255, 255, 0.5));
}

.window-title-button:active {
    background: var(--active-bg, rgba(255, 255, 255, 0.1));
    box-shadow: var(--shadow-inset, inset 0 -2px 10px -1px rgba(255, 255, 255, 0.1));
    transform: scale(0.95);
}

/* Window Content */
.window-content {
    height: calc(100% - var(--window-titlebar-height, 32px));
    padding: 0;
    color: var(--text-primary, #f0f0f0);
    font-size: 0.9em;
    line-height: 1.4em;
    border: var(--border, 1px solid rgba(20, 20, 20, 0.6));
    border-top: 0;
    border-radius: 0 0 var(--micro-sm, 4px) var(--micro-sm, 4px);
    background: var(--window-bg, rgba(20, 20, 20, 0.75));
    overflow: hidden;
    box-sizing: border-box;
}

/* Content with padding for text */
.window-content-text {
    height: 100%;
    overflow: auto;
    padding: 1rem;
    box-sizing: border-box;
}

/* Full content (for iframes and apps) */
.window-content iframe {
    width: 100% !important;
    height: 100% !important;
    border: none !important;
    display: block;
    margin: 0;
    padding: 0;
}

/* Window States */
.window.active-window {
    outline: none;
    box-shadow: var(--shadow-soft, 0 0 7px -4px rgba(255, 255, 255, 0.5));
}

.window.minimized {
    display: none;
}

/* Window Animations */
.window.opening {
    animation: windowOpen 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

@keyframes windowOpen {
    0% {
        opacity: 0;
        transform: scale(0.8) translateY(20px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.window.closing {
    animation: windowClose 0.25s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards;
    pointer-events: none;
}

@keyframes windowClose {
    0% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
    100% {
        opacity: 0;
        transform: scale(0.8) translateY(-20px);
    }
}

.window.minimizing {
    animation: windowMinimize 0.25s cubic-bezier(0.55, 0.055, 0.675, 0.19) forwards;
    pointer-events: none;
}

@keyframes windowMinimize {
    0% {
        opacity: 1;
        transform: scale(1);
    }
    100% {
        opacity: 0;
        transform: scale(0.1) translateY(100px);
    }
}

.window.restoring {
    animation: windowRestore 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

@keyframes windowRestore {
    0% {
        opacity: 0;
        transform: scale(0.1) translateY(100px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Prevent animations during drag */
.window.dragging {
    transition: none !important;
    animation: none !important;
}

/* Resize Handles */
.resize-handle {
    background: transparent;
    position: absolute;
    z-index: 1001;
}

.resize-right {
    right: 0; 
    top: 0; 
    width: var(--resize-handle-small, 8px); 
    height: 100%; 
    cursor: ew-resize;
}

.resize-bottom {
    left: 0; 
    bottom: 0; 
    width: 100%; 
    height: var(--resize-handle-small, 8px); 
    cursor: ns-resize;
}

.resize-corner {
    right: 0; 
    bottom: 0; 
    width: var(--resize-handle-large, 16px); 
    height: var(--resize-handle-large, 16px); 
    cursor: nwse-resize;
}