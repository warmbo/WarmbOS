<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WarmbOS Editor</title>
  <link rel="stylesheet" href="../../static/styles.css">
  <link rel="stylesheet" href="../../static/editor.css">
  <script>
    const URL_PREFIX = "{{ URL_PREFIX }}";
  </script>
</head>
<body>

  <form id="config-form">
    <div class="container">
      <div class="section" data-type="taskbar">
        <h2 onclick="toggleSection(this)">Taskbar</h2>
        <div class="entries" id="taskbar-entries">
          <button type="button" class="add-btn" onclick="window.addEntry('taskbar')">+ Add Taskbar Item</button>
        </div>
      </div>

      <div class="section" data-type="main_menu">
        <h2 onclick="toggleSection(this)">Main Menu</h2>
        <div class="entries" id="main-menu-entries">
          <button type="button" class="add-btn" onclick="window.addEntry('main_menu')">+ Add Main Menu Item</button>
          <button type="button" class="add-btn" onclick="window.addHeading('main_menu')">+ Add Heading</button>
        </div>
      </div>

      <div class="section" data-type="taskbar_unique">
        <h2 onclick="toggleSection(this)">System</h2>
        <div class="entries" id="taskbar-unique-entries">
          <button type="button" class="add-btn" onclick="window.addEntry('taskbar_unique')">+ Add System Button</button>
        </div>
      </div>
    </div>
    <button type="submit" id="save-btn" class="save-btn">
      <img src="../../static/images/ui/check.png"> Save
    </button>
  </form>

  <template id="entry-template">
    <div class="entry" draggable="true">
      <div class="entry-header">
        <input name="title" placeholder="Title" />
        <button type="button" class="expand-btn" onclick="toggleEntryDetails(this)">+</button>
        <button type="button" class="move-btn" onclick="moveEntryUp(event)">⬆</button>
        <button type="button" class="move-btn" onclick="moveEntryDown(event)">⬇</button>
        <button type="button" class="remove-btn" onclick="confirmRemoveEntry(event)">X</button>
      </div>
      <div class="entry-details" style="display:none;">
        <label>URL<input name="url" /></label>
        <label>Width<input name="width" placeholder="e.g. 1280px" /></label>
        <label>Height<input name="height" placeholder="e.g. 768px" /></label>
        <label>Icon URL<input name="icon" placeholder="/static/images/apps/icon.png" /></label>
      </div>
    </div>
  </template>

  <template id="heading-template">
    <div class="entry" draggable="true">
      <div class="entry-header">
        <label style="flex-grow: 1;">Heading Text
          <input name="heading" />
        </label>
        <button type="button" class="expand-btn" onclick="toggleEntryDetails(this)">+</button>
        <button type="button" class="move-btn move-up" onclick="moveEntry(event, 'up')">⬆</button>
        <button type="button" class="move-btn move-down" onclick="moveEntry(event, 'down')">⬇</button>
        <button type="button" class="remove-btn" onclick="confirmRemoveEntry(event)">X</button>
      </div>
      <div class="entry-details" style="display:none;">
        <!-- No extra fields for headings -->
      </div>
    </div>
  </template>

  <template id="icon-selector-template">
    <div class="icon-selector">
      <label>Icon Selection
        <select name="icon-select" class="icon-select">
          <option value="">-- Select an icon --</option>
          <!-- Options will be populated by JavaScript -->
        </select>
      </label>
      <span class="or-text">OR</span>
      <label>Custom Icon URL<input name="icon-url" placeholder="/os/static/images/apps/icon.png" /></label>
    </div>
  </template>

  <script src="../../static/js/selfhst-icons.js"></script>
  <script src="../../static/js/editor.js"></script>

</body>
</html>
